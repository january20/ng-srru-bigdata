<div class="my-5 text-center" style="height: 100vh;" *ngIf="!dataSource">
  <div class="absolute-center">
    <mat-spinner class="mx-auto"></mat-spinner>
    กำลังโหลดข้อมูล.
  </div>
</div>
  
<div class="ms-site-container mt-5" *ngIf="dataSource">
  <div class="ms-hero-page-override ms-hero-img-airplane ms-bg-fixed ms-hero-bg-dark-light">
    <div class="container">
      <div class="text-center">
        <h1 class="no-m ms-site-title color-white center-block ms-site-title-lg mt-2 animated zoomInDown animation-delay-5">ผลการประเมินโครงการ</h1>
        <p class="lead lead-lg color-white text-center center-block mx-auto mt-2 mb-4 mw-800 text-uppercase fw-300 animated fadeInUp animation-delay-7"><a routerLink="/projects/{{ project.id }}" class="color-white"><i class="fa fa-external-link-square" aria-hidden="true"></i> {{ project.project_name }}</a></p>
        <p class="lead lead-lg color-white text-center center-block mx-auto mt-2 mb-4 mw-800 text-uppercase fw-300 animated fadeInUp animation-delay-7"><a routerLink="/projects/{{ project.id }}" class="color-white">จากผู้ประเมิน {{ ' '+project.assessment_result.assessors.length+' ' }} ท่าน</a></p>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="card card-royal card-hero animated fadeInUp animation-delay-7">
      <div class="card-header">
        <span class="card-title">1. ผลการประเมินวัตถุประสงค์</span>
      </div>
      
      <table mat-table [dataSource]="dataSource._data._value.objectives" class="mat-elevation-z8 w-100" multiTemplateDataRows matSort>
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>วัตถุประสงค์</th>
          <td mat-cell *matCellDef="let row">{{ row.objective }} </td>
        </ng-container>
      
        <ng-container matColumnDef="achieve">
          <th mat-header-cell *matHeaderCellDef>บรรลุ</th>
          <td mat-cell *matCellDef="let row">{{ row.assessment_result.achieve }}</td>
        </ng-container>
      
        <ng-container matColumnDef="not_achieve">
          <th mat-header-cell *matHeaderCellDef>ไม่บรรลุ</th>
          <td mat-cell *matCellDef="let row">{{ row.assessment_result.not_achieve }}</td>
        </ng-container>
        
        <ng-container matColumnDef="suggestion">
          <th mat-header-cell *matHeaderCellDef>ข้อเสนอแนะ<mat-icon [className]="isDeleted ? 'd-inline-block' : 'd-none'"><mat-spinner color="primary" diameter="20"></mat-spinner></mat-icon></th>
          <td mat-cell *matCellDef="let row">
            <button mat-icon-button (click)="dataSource._data._value.objectives = dataSource._data._value.objectives === row ? null : row">
              <mat-icon class="green-icon" matTooltip="ข้อเสนอแนะ">add</mat-icon>
            </button>
          </td>
        </ng-container>
<!-- 
        <ng-container matColumnDef="expandedSuggestion">
          <td mat-cell *matCellDef="let row" [attr.colspan]="displayedColumns.length">
            <ol [@suggestionExpand]="row == dataSource._data._value.objectives ? 'expanded' : 'collapsed'">
              <li *ngFor="let sg of row.assessment_result.suggestion">{{ sg }}</li>
            </ol>
          </td>
        </ng-container> -->

      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="element-row" [class.expanded-row]="dataSource._data._value.objectives === row" ></tr>
        <!-- <tr mat-row *matRowDef="let row; columns: ['expandedSuggestion']" class="suggestion-row"></tr> -->
      </table>
    </div>
  </div>
</div>